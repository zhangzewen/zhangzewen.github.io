<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="zh-cn" lang="zh-cn" >

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.149.1">

  <title>What a Life!</title>

  <meta name="description" content="Software Engineer" />

  
  <meta itemprop="name" content="What a Life!">
  <meta itemprop="description" content="Software Engineer">
  <meta itemprop="datePublished" content="2025-08-29T02:43:31+08:00">
  <meta itemprop="dateModified" content="2028-02-17T08:13:34+08:00">
  <meta itemprop="image" content="https://www.zhangzewen.net/images/profile.png">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://www.zhangzewen.net/images/profile.png">
  <meta name="twitter:title" content="What a Life!">
  <meta name="twitter:description" content="Software Engineer">


<meta property="og:url" content="https://www.zhangzewen.net/">
  <meta property="og:site_name" content="What a Life!">
  <meta property="og:title" content="What a Life!">
  <meta property="og:description" content="Software Engineer">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="website">
    <meta property="og:image" content="https://www.zhangzewen.net/images/profile.png">



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type":"Person",
      "@id": "https://www.zhangzewen.net/#author",
      "name": "Zhang Zewen",
      "image": {
        "@type":"ImageObject",
        
        "url": "https://www.zhangzewen.net/images/android-chrome-512x512.png"
        
      },
      "description": "Software Engineer"
    },
    {
      "@type": "WebSite",
      "@id": "https://www.zhangzewen.net/#website",
      "url": "https://www.zhangzewen.net/",
      "name": "What a Life!",
      "description": "Software Engineer",
      "publisher": {
        "@id": "https://www.zhangzewen.net/#author"
      },
      "inLanguage": "zh-cn"
    },
    {
      "@type": "ImageObject",
      "url": "https://www.zhangzewen.net/images/profile.png",
      "caption": "What a Life!"
    },
    {
      "@type": "WebPage",
      "@id": "https://www.zhangzewen.net/#webpage",
      "url": "https://www.zhangzewen.net/",
      "name": "What a Life!",
      "isPartOf": {
        "@id": "https://www.zhangzewen.net/#website"
      },
      "about": {
         "@id": "https://www.zhangzewen.net/#author"
      },
      "datePublished": "2025-08-29T02:43:31+08:00",
      "dateModified": "2028-02-17T08:13:34+08:00",
      "description": "Software Engineer",
      "inLanguage": "zh-cn",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": [
            "https://www.zhangzewen.net/"
          ]
        }
      ]
    }
  ]
}
</script>



  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">

  <link type="text/css" rel="stylesheet" href="/css/poole.css">

  <link type="text/css" rel="stylesheet" href="/css/hyde.css">

  


  

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
    integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  
  <link href="https://www.zhangzewen.net/index.xml" rel="alternate" type="application/rss+xml" title="What a Life!" />
  </head>

<body>
  <aside class="toc">
  
  
  
</aside>

  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="https://www.zhangzewen.net/">
            <img src="/images/android-chrome-512x512.png" class="img-circle img-headshot center" alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>What a Life!</h1>

      
      <p class="lead">Software Engineer</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://www.zhangzewen.net/">Home</a>
        </li>
        <li>
          <a href="/tags/">Tags</a>
        </li><li>
          <a href="/archive/">Archives</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
    </section>
  </div>
</aside>


  <main class="content container">
    <div class="posts">
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/pleg/">kubernetes 源码分析之 kubelet pleg</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-05-06T01:27:07&#43;0800">May 6, 2025</time> &middot; 7 min read
        </div>

        <div>
          <blockquote>
<p>本篇文章基于 Kubernetes v1.25.1</p></blockquote>
<p>PLEG 是 &ldquo;Pod Lifecycle Event Generator&rdquo; 的缩写，监控运行在集群各个节点上的容器状态变化，并将这些变化事件推送给 kubelet，kubelet 处理后同步到 apiserver。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/pleg/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/probe-manager/">kubernetes 源码分析之 container 探针以及探针管理</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-04-22T21:27:07&#43;0800">Apr 22, 2025</time> &middot; 9 min read
        </div>

        <div>
          <blockquote>
<p>本篇文章基于 Kubernetes v1.25.1</p></blockquote>
<p>kubernetes 支持三种 container 探针：startupProbe、readinessProbe、livenessProbe。 livenessProbe 决定是否要重启容器，readinessProbe 确认是服务是否可用，startupProbe 是为了避免 container 启动时间过长使得 liveness 失败而造成无限重启的场景。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/probe-manager/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/life/nan_tai_hang/">三月份南太行穿越</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-04-13T14:54:32&#43;0800">Apr 13, 2025</time> &middot; 1 min read
        </div>

        <div>
          <p>为了准备3月底的熊猫蜀道山比赛，3月份去了两次南太行，都是两天的行程。</p>
<p>第一天的路线： 双底村—马武寨—抱犊村—西莲—隧道—锡崖沟—张沟。 全程39公里左右，爬升1500m - 1600m。</p>
<p>双底村出来后红豆衫大峡谷，三月份的时候还是是枯水期，河床的石头很光滑，背阴处的冰瀑布还是很壮观的，就是有些脏。</p>
<p>过了大峡谷就是一段爬升，应该有600-700左右，然后下到马武寨，从马武寨到老龙口整体下降趋势，很简单，只是刚开始会很泥泞，因为化冻。</p>
<p>从老龙口到西莲这一段我觉得是精华所在， 这一段是沿着山边儿的小路切到西莲，路旁边就是悬崖，垂直的崖壁，感觉就是凭空拔地而起，一点都不拖泥带水，只要不是低着头往前冲，还是很安全的。一路跑跑停停，拍照，拍照，还是拍照。有很多突出来的平台，好多人都在那儿排队打卡，我只是看了眼就走了，有些恐高，无福消受。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/life/nan_tai_hang/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/life/xiong_mao_shu_dao_shan/">四川成都之行：熊猫蜀道山赛记</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-04-05T14:21:45&#43;0800">Apr 5, 2025</time> &middot; 1 min read
        </div>

        <div>
          <p>准备已久的比赛以 DNF 收尾，这篇就记录个流水账吧。</p>
<p>在成都下飞机就上午10点了，到天府广场都快12点了，计划去宽窄巷子逛逛也没有时间，下地铁随便吃了些就去成都博物馆。 成都博物馆提供了免费的行李寄存处，虽然我预约的是下午1点的，但是没有到点也让进了。</p>
<p>博物馆里逛了差不多3个小时，我最喜欢的就是看各种陶俑了，总是喜哈哈地，还有蜀锦(不怎么好拍照，显示不了细节)，然后就是一些器皿上的纹理，真的很细腻很不真实，总让我有种这不是现代仿的吧的感觉。然后就是木偶和皮影，想起了这些年追的金光布袋戏。然后是震撼了我一百年的皮影，三打白骨精 白骨夫人变换人形简直神了，然后就是杨丽萍的《月光》皮影版也是让人叹为观止，这也让我想起了我的姥爷，他以前也是唱皮影戏的。</p>
<p>从博物馆出来后直接坐地铁到犀黄坐火车去彭州，然后在彭州又坐去白鹿的旅游专线到了白鹿音乐小镇，挺折腾的。每次出去比赛，出行总是最耗时的，也是消费大头。</p>
<p>比赛的当天天气有些冷，但是现场很是热闹，我们168KM组别的首先出发，广场里面挤满了人，到点儿比赛准时开始。 我在CP1和CP2之间把肌肉拉伤(我觉得是，人生第一次，没有啥经验，恢复的很快)了。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/life/xiong_mao_shu_dao_shan/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/cpp/deep_dive_into_type_traits_and_sfinae/">C&#43;&#43; Type Traits 和 SFINAE</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-03-15T09:43:31&#43;0800">Mar 15, 2025</time> &middot; 3 min read
        </div>

        <div>
          <h2 id="type-traits">Type Traits</h2>
<p>c++ type traits 特性一句话总结：“<strong>在编译期利用模板的(偏)特化功能提取目标的相关信息，用于确定策略或者实现细节</strong>”。</p>
<p>这在模板编程中很有用， 因为模板参数<code>T</code>的存在，实现模板的人很难预测使用模板的人会输入什么类型的参数，一般的 c++ type traits 的编程套路就是：</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/cpp/deep_dive_into_type_traits_and_sfinae/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/pluginmanager/">kubernetes 源码分析之 kubelet plugin manager</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-03-11T00:43:31&#43;0800">Mar 11, 2025</time> &middot; 7 min read
        </div>

        <div>
          <blockquote>
<p>本篇文章基于 Kubernetes v1.25.1</p></blockquote>
<p>kubernetes 的组件 kubelet 提供了两种类型的插件来扩展 kubernetes 的能力: CSI 和 Device。得益于 gRPC 和 Linux 的 inotify 实现了插件的动态管理。本片文章将详细讲解 kubelet 管理插件的逻辑，至于 CSI 和 Device 这两种类型的插件的详细内容，不在本片文章讨论范围之内，本片文章会在需要的地方提及一下，不会对理解本片文章造成困难。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/pluginmanager/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/">C&#43;&#43; STL 迭代器</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-03-02T09:43:31&#43;0800">Mar 2, 2025</time> &middot; 2 min read
        </div>

        <div>
          <h2 id="c-迭代器的种类">c++ 迭代器的种类</h2>
<p>在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>  <span style="color:#fe8019">struct</span> input_iterator_tag {};  <span style="color:#928374;font-style:italic">// 输入迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#fe8019">struct</span> output_iterator_tag {}; <span style="color:#928374;font-style:italic">// 输出迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#fe8019">struct</span> forward_iterator_tag <span style="color:#fe8019">:</span> <span style="color:#fe8019">public</span> input_iterator_tag {};  <span style="color:#928374;font-style:italic">// 向前迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#fe8019">struct</span> bidirectional_iterator_tag <span style="color:#fe8019">:</span> <span style="color:#fe8019">public</span> forward_iterator_tag {}; <span style="color:#928374;font-style:italic">// 双向迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>  <span style="color:#fe8019">struct</span> random_access_iterator_tag <span style="color:#fe8019">:</span> <span style="color:#fe8019">public</span> bidirectional_iterator_tag {}; <span style="color:#928374;font-style:italic">// 随机访问迭代器
</span></span></span></code></pre></div><p>输入迭代器指向的位置只能被顺序读取：</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/cpp/effective-modern-cpp-unit-six/">Effective Modern C&#43;&#43; 读书笔记之第六章</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-02-27T18:34:44&#43;0800">Feb 27, 2025</time> &middot; 2 min read
        </div>

        <div>
          <h2 id="item-31-避免使用默认的变量捕获方式">Item 31 避免使用默认的变量捕获方式</h2>
<p><code>c++11</code>的<code>lambda</code>表达式有两种变量的捕获方式：按值(复制)捕获和引用捕获(默认模式)。在采用引用模式(默认<code>[&amp;]</code>会捕获定义<code>lambda</code>表达式作用域下的所有变量, <code>[&amp;params]</code>为显示捕获定义<code>lambda</code>表达式作用域下特定的变量)下，如果不加注意的话,<code>lambda</code>表达式很容易走出引用变量的作用域范围，造成悬空引用，会产生未定义的错误。</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#8ec07c">#include</span> <span style="color:#8ec07c;font-style:italic">&lt;iostream&gt;</span><span style="color:#8ec07c">
</span></span></span><span style="display:flex;"><span><span style="color:#8ec07c">#include</span> <span style="color:#8ec07c;font-style:italic">&lt;functional&gt;</span><span style="color:#8ec07c">
</span></span></span><span style="display:flex;"><span><span style="color:#8ec07c">#include</span> <span style="color:#8ec07c;font-style:italic">&lt;string&gt;</span><span style="color:#8ec07c">
</span></span></span><span style="display:flex;"><span><span style="color:#8ec07c"></span><span style="color:#fe8019">class</span> A
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="color:#fe8019">public</span><span style="color:#fe8019">:</span>
</span></span><span style="display:flex;"><span>    A() <span style="color:#fe8019">:</span> name_(<span style="color:#b8bb26">&#34;default&#34;</span>){}
</span></span><span style="display:flex;"><span>    <span style="color:#fabd2f">void</span> <span style="color:#fabd2f">Print</span>() <span style="color:#fe8019">const</span> {
</span></span><span style="display:flex;"><span>        std<span style="color:#fe8019">::</span>cout <span style="color:#fe8019">&lt;&lt;</span> <span style="color:#b8bb26">&#34;A::Print: &#34;</span> <span style="color:#fe8019">&lt;&lt;</span> name_ <span style="color:#fe8019">&lt;&lt;</span> std<span style="color:#fe8019">::</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> <span style="color:#fe8019">private</span><span style="color:#fe8019">:</span>
</span></span><span style="display:flex;"><span>        std<span style="color:#fe8019">::</span>string name_;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fe8019">typedef</span> std<span style="color:#fe8019">::</span>function<span style="color:#fe8019">&lt;</span><span style="color:#fabd2f">void</span>()<span style="color:#fe8019">&gt;</span> func;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fabd2f">int</span> <span style="color:#fabd2f">main</span>(<span style="color:#fabd2f">int</span> argc, <span style="color:#fabd2f">char</span><span style="color:#fe8019">**</span> argv)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    func target;
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        A a;
</span></span><span style="display:flex;"><span>        <span style="color:#fe8019">auto</span> f <span style="color:#fe8019">=</span> [<span style="color:#fe8019">&amp;</span>](){ a.Print();};
</span></span><span style="display:flex;"><span>        <span style="color:#928374;font-style:italic">//auto f = [&amp;a](){ a.Print();};
</span></span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"></span>        target <span style="color:#fe8019">=</span> f;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    target();
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">return</span> <span style="color:#d3869b">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在我自己机器下的测试结果为</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/cpp/effective-modern-cpp-unit-six/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/eviction-manager/">kubernetes 源码分析之 kubelet eviction manager</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-02-27T09:43:31&#43;0800">Feb 27, 2025</time> &middot; 8 min read
        </div>

        <div>
          <p>在分析 eviction manager 的实现之前，先要说一下工具类-阀值触发器的实现，对 eviction manager 的理解还是有帮助的。</p>
<h2 id="阀值触发器">阀值触发器</h2>
<p>接口 CgroupNotifier 定义了阀值触发器的功能，其实现是 linuxCgroupNotifier。 而接口 NotifierFactor 提供的方法 NewCgroupNotifier 是生成 CgroupNotifier 实例的，重点是其实例 memoryThresholdNotifier 中的字段 factory 和 notifier， factory 是用来生成阀值触发器实例工厂函数, notifier 是 factory 生产的具体阀值触发器实例。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/kubernetes/kubelet/eviction-manager/">Read More</a>
        </div>
      </article>
      <article class="post">
        <h1 class="post-title">
          <a href="https://www.zhangzewen.net/posts/linux/gdb_init_script/">gdb init script</a>
        </h1>

        <div class="post-date">
          <time datetime="2025-02-25T09:43:31&#43;0800">Feb 25, 2025</time> &middot; 1 min read
        </div>

        <div>
          <p>.gdbinit 能够将gdb基本命令添加到文件中以避免每次启动gdb 进行 debug 时候输入他们，例如</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>b main
</span></span><span style="display:flex;"><span>r
</span></span><span style="display:flex;"><span>b main.c:56
</span></span><span style="display:flex;"><span>c
</span></span></code></pre></div><p>这样就可以避免重复性的劳动。</p>
        </div>

        <div class="read-more-link">
          <a href="https://www.zhangzewen.net/posts/linux/gdb_init_script/">Read More</a>
        </div>
      </article>
  </div>

  
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/page/2/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/page/4/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/page/7/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
  </main>

  <footer>
  <div>
    <p>
      &copy; Zhang Zewen 2025

      &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

      
    </p>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
    integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0=" crossorigin="anonymous"></script>


  <script src="/js/jquery.min.js"></script>
  <script src="/js/soho.js"></script>

  

  
  
  
</body>

</html>
