<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="zh-cn" lang="zh-cn" >

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.149.0">

  <title>C&#43;&#43; STL 迭代器 &middot; What a Life!</title>

  <meta name="description" content="" />

  
  <meta itemprop="name" content="C&#43;&#43; STL 迭代器">
  <meta itemprop="description" content="c&#43;&#43; 迭代器的种类 在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：
struct input_iterator_tag {}; // 输入迭代器 struct output_iterator_tag {}; // 输出迭代器 struct forward_iterator_tag : public input_iterator_tag {}; // 向前迭代器 struct bidirectional_iterator_tag : public forward_iterator_tag {}; // 双向迭代器 struct random_access_iterator_tag : public bidirectional_iterator_tag {}; // 随机访问迭代器 输入迭代器指向的位置只能被顺序读取：">
  <meta itemprop="datePublished" content="2025-03-02T09:43:31+08:00">
  <meta itemprop="dateModified" content="2025-03-02T09:43:31+08:00">
  <meta itemprop="wordCount" content="405">
  <meta itemprop="image" content="https://www.zhangzewen.net/images/profile.png">
  <meta itemprop="keywords" content="C&#43;&#43;">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://www.zhangzewen.net/images/profile.png">
  <meta name="twitter:title" content="C&#43;&#43; STL 迭代器">
  <meta name="twitter:description" content="c&#43;&#43; 迭代器的种类 在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：
struct input_iterator_tag {}; // 输入迭代器 struct output_iterator_tag {}; // 输出迭代器 struct forward_iterator_tag : public input_iterator_tag {}; // 向前迭代器 struct bidirectional_iterator_tag : public forward_iterator_tag {}; // 双向迭代器 struct random_access_iterator_tag : public bidirectional_iterator_tag {}; // 随机访问迭代器 输入迭代器指向的位置只能被顺序读取：">


<meta property="og:url" content="https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/">
  <meta property="og:site_name" content="What a Life!">
  <meta property="og:title" content="C&#43;&#43; STL 迭代器">
  <meta property="og:description" content="c&#43;&#43; 迭代器的种类 在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：
struct input_iterator_tag {}; // 输入迭代器 struct output_iterator_tag {}; // 输出迭代器 struct forward_iterator_tag : public input_iterator_tag {}; // 向前迭代器 struct bidirectional_iterator_tag : public forward_iterator_tag {}; // 双向迭代器 struct random_access_iterator_tag : public bidirectional_iterator_tag {}; // 随机访问迭代器 输入迭代器指向的位置只能被顺序读取：">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-03-02T09:43:31+08:00">
    <meta property="article:modified_time" content="2025-03-02T09:43:31+08:00">
    <meta property="article:tag" content="C&#43;&#43;">
    <meta property="og:image" content="https://www.zhangzewen.net/images/profile.png">



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type":"Person",
      "@id": "https://www.zhangzewen.net/#author",
      "name": "Zhang Zewen",
      "image": {
        "@type":"ImageObject",
        
        "url": "https://www.zhangzewen.net/images/android-chrome-512x512.png"
        
      },
      "description": "Software Engineer"
    },
    {
      "@type": "WebSite",
      "@id": "https://www.zhangzewen.net/#website",
      "url": "https://www.zhangzewen.net/",
      "name": "What a Life!",
      "description": "Software Engineer",
      "publisher": {
        "@id": "https://www.zhangzewen.net/#author"
      },
      "inLanguage": "zh-cn"
    },
    {
      "@type": "ImageObject",
      "url": "https://www.zhangzewen.net/images/profile.png",
      "caption": "What a Life!"
    },
    {
      "@type": "WebPage",
      "@id": "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/#webpage",
      "url": "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/",
      "name": "C++ STL 迭代器",
      "isPartOf": {
        "@id": "https://www.zhangzewen.net/#website"
      },
      "about": {
         "@id": "https://www.zhangzewen.net/#author"
      },
      "datePublished": "2025-03-02T09:43:31+08:00",
      "dateModified": "2025-03-02T09:43:31+08:00",
      "description": "\u003ch2 id=\"c-迭代器的种类\"\u003ec++ 迭代器的种类\u003c/h2\u003e\n\u003cp\u003e在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ff79c6\"\u003estruct\u003c/span\u003e \u003cspan style=\"color:#50fa7b\"\u003einput_iterator_tag\u003c/span\u003e {};  \u003cspan style=\"color:#6272a4\"\u003e// 输入迭代器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#6272a4\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#ff79c6\"\u003estruct\u003c/span\u003e \u003cspan style=\"color:#50fa7b\"\u003eoutput_iterator_tag\u003c/span\u003e {}; \u003cspan style=\"color:#6272a4\"\u003e// 输出迭代器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#6272a4\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#ff79c6\"\u003estruct\u003c/span\u003e \u003cspan style=\"color:#50fa7b\"\u003eforward_iterator_tag\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003epublic\u003c/span\u003e input_iterator_tag {};  \u003cspan style=\"color:#6272a4\"\u003e// 向前迭代器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#6272a4\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#ff79c6\"\u003estruct\u003c/span\u003e \u003cspan style=\"color:#50fa7b\"\u003ebidirectional_iterator_tag\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003epublic\u003c/span\u003e forward_iterator_tag {}; \u003cspan style=\"color:#6272a4\"\u003e// 双向迭代器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#6272a4\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#ff79c6\"\u003estruct\u003c/span\u003e \u003cspan style=\"color:#50fa7b\"\u003erandom_access_iterator_tag\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#ff79c6\"\u003epublic\u003c/span\u003e bidirectional_iterator_tag {}; \u003cspan style=\"color:#6272a4\"\u003e// 随机访问迭代器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e输入迭代器指向的位置只能被顺序读取：\u003c/p\u003e",
      "inLanguage": "zh-cn",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": [
            "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/"
          ]
        }
      ]
    },
    {
      "@type": "Article",
      "isPartOf": {
        "@id": "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/#webpage"
      },
      "mainEntityOfPage": {
        "@id": "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/#webpage"
      },
      "headline": "C++ STL 迭代器",
      "datePublished": "2025-03-02T09:43:31+08:00",
      "dateModified": "2025-03-02T09:43:31+08:00",
      "publisher": {
        "@id": "https://www.zhangzewen.net/#author"
      },
      "keywords": [
        "C++"
      ],
      "articleSection": [
      ],
      "inLanguage": "zh-cn",
      "author": {
        "@type": "Person",
        "name":  null 
      },
      "potentialAction": [
        {
          "@type": "CommentAction",
          "name": "Comment",
          "target": [
            "https://www.zhangzewen.net/posts/cpp/deep_dive_into_cpp_iterators/#comments"
          ]
        }
      ]
    }
  ]
}
</script>



  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">

  <link type="text/css" rel="stylesheet" href="/css/poole.css">

  <link type="text/css" rel="stylesheet" href="/css/hyde.css">

  


  

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
    integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>

<body>
  <aside class="toc">
  
  
  <h3>目录</h3>
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#c-迭代器的种类">c++ 迭代器的种类</a></li>
        <li><a href="#萃取">萃取</a></li>
        <li><a href="#逆向迭代器">逆向迭代器</a></li>
        <li><a href="#insert-迭代器">insert 迭代器</a></li>
      </ul>
    </li>
  </ul>
</nav>
  
  
</aside>

  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="https://www.zhangzewen.net/">
            <img src="/images/android-chrome-512x512.png" class="img-circle img-headshot center" alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>What a Life!</h1>

      
      <p class="lead">Software Engineer</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://www.zhangzewen.net/">Home</a>
        </li>
        <li>
          <a href="/tags/">Tags</a>
        </li><li>
          <a href="/archive/">Archives</a>
        </li><li>
          <a href="/about-me/">About Me</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://github.com/zhangzewen" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
    <div class="post">
  <h1 class="title">C&#43;&#43; STL 迭代器</h1>
  
  

  <div class="post-date">
    <time datetime=" 2025-03-02T09:43:31&#43;0800">Created: Mar 2, 2025</time>
    <span class="readtime">&middot; 2 min read</span>
  </div>

  <div>
    <h2 id="c-迭代器的种类">c++ 迭代器的种类</h2>
<p>在STL中，迭代器的种类可以分为输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>  <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">input_iterator_tag</span> {};  <span style="color:#6272a4">// 输入迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">output_iterator_tag</span> {}; <span style="color:#6272a4">// 输出迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">forward_iterator_tag</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">public</span> input_iterator_tag {};  <span style="color:#6272a4">// 向前迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">bidirectional_iterator_tag</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">public</span> forward_iterator_tag {}; <span style="color:#6272a4">// 双向迭代器
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">random_access_iterator_tag</span> <span style="color:#ff79c6">:</span> <span style="color:#ff79c6">public</span> bidirectional_iterator_tag {}; <span style="color:#6272a4">// 随机访问迭代器
</span></span></span></code></pre></div><p>输入迭代器指向的位置只能被顺序读取：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span>, <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Distance</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">input_iterator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> input_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Distance          difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">*</span>               pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">&amp;</span>               reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>输出迭代器指向的位置只能被顺序写入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">output_iterator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> output_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>向前迭代器只能自增不能自减，是一种特殊输入迭代器：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span>, <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Distance</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">forward_iterator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> forward_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                  value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Distance            difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">*</span>                 pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">&amp;</span>                 reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>双向迭代器既能自增，又能自减，是一种特殊的能够自减的向前迭代器：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span>, <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Distance</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">bidirectional_iterator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> bidirectional_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                        value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Distance                  difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">*</span>                       pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">&amp;</span>                       reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>随机访问迭代器既能自增，又能自减，是一种特殊的双向迭代器，即它不像双向迭代器那样自增或者自减一个单位，随机访问迭代器可以自增或者自减n个单位：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span>, <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Distance</span><span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">random_access_iterator</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> random_access_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                        value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Distance                  difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">*</span>                       pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">&amp;</span>                       reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>这些迭代器定义中的：</p>
<ul>
<li><strong>iterator_category</strong>：表示迭代器种类</li>
<li><strong>value_type</strong>：表示迭代器指向的实例类型</li>
<li><strong>difference_type</strong>：表示迭代器距离的类型</li>
<li><strong>pointer</strong>：表示迭代器指向的实例的指针类型</li>
<li><strong>reference</strong>：表示实例引用类型</li>
</ul>
<h2 id="萃取">萃取</h2>
<p>迭代器信息的萃取：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Iterator</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">iterator_traits</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> _Iterator<span style="color:#ff79c6">::</span>iterator_category iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> _Iterator<span style="color:#ff79c6">::</span>value_type        value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> _Iterator<span style="color:#ff79c6">::</span>difference_type   difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> _Iterator<span style="color:#ff79c6">::</span>pointer           pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> _Iterator<span style="color:#ff79c6">::</span>reference         reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>针对对指针的特例化，因为原始的指针内部是没有定义相关的数据类型：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">iterator_traits</span><span style="color:#ff79c6">&lt;</span>_Tp<span style="color:#ff79c6">*&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> random_access_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                         value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> ptrdiff_t                   difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">*</span>                        pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp<span style="color:#ff79c6">&amp;</span>                        reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Tp</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">struct</span> <span style="color:#50fa7b">iterator_traits</span><span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">const</span> _Tp<span style="color:#ff79c6">*&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> random_access_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Tp                         value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> ptrdiff_t                   difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">const</span> _Tp<span style="color:#ff79c6">*</span>                  pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">const</span> _Tp<span style="color:#ff79c6">&amp;</span>                  reference;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p><code>iterator_category</code> 函数所返回的是迭代器中<code>iterator_category</code>类型的实例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Iter</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">inline</span> <span style="color:#ff79c6">typename</span> iterator_traits<span style="color:#ff79c6">&lt;</span>_Iter<span style="color:#ff79c6">&gt;::</span>iterator_category
</span></span><span style="display:flex;"><span>__iterator_category(<span style="color:#ff79c6">const</span> _Iter<span style="color:#ff79c6">&amp;</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#ff79c6">typename</span> iterator_traits<span style="color:#ff79c6">&lt;</span>_Iter<span style="color:#ff79c6">&gt;::</span>iterator_category _Category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">_Category</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Iter</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">inline</span> <span style="color:#ff79c6">typename</span> iterator_traits<span style="color:#ff79c6">&lt;</span>_Iter<span style="color:#ff79c6">&gt;::</span>iterator_category
</span></span><span style="display:flex;"><span>iterator_category(<span style="color:#ff79c6">const</span> _Iter<span style="color:#ff79c6">&amp;</span> __i) { <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">__iterator_category</span>(__i); }
</span></span></code></pre></div><h2 id="逆向迭代器">逆向迭代器</h2>
<p>逆向迭代器顾名思义其自增和自减的方向与其封装的迭代器正好是反过来的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Iterator</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">reverse_iterator</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">protected</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>  _Iterator current;
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">public</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>  reverse_iterator() {}
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">explicit</span> <span style="color:#50fa7b">reverse_iterator</span>(iterator_type __x) <span style="color:#ff79c6">:</span> current(__x) {}
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// 自增时，封装的迭代器自减
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  _Self<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">++</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">--</span>current;
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// 自减时，封装的迭代器自增
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  _Self<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">--</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">++</span>current;
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="insert-迭代器">insert 迭代器</h2>
<p><code>insert_iterator</code> 用于向容器指定位置插入元素，容器必须实现<code>insert</code>成员方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">_Container</span><span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">insert_iterator</span> {
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">protected</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>  _Container<span style="color:#ff79c6">*</span> container;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typename</span> _Container<span style="color:#ff79c6">::</span>iterator iter;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">public</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> _Container          container_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> output_iterator_tag iterator_category;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                value_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                difference_type;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                pointer;
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">typedef</span> <span style="color:#8be9fd">void</span>                reference;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  insert_iterator(_Container<span style="color:#ff79c6">&amp;</span> __x, <span style="color:#ff79c6">typename</span> _Container<span style="color:#ff79c6">::</span>iterator __i) 
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">:</span> container(<span style="color:#ff79c6">&amp;</span>__x), iter(__i) {}
</span></span><span style="display:flex;"><span>  insert_iterator<span style="color:#ff79c6">&lt;</span>_Container<span style="color:#ff79c6">&gt;&amp;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">=</span>(<span style="color:#ff79c6">const</span> <span style="color:#ff79c6">typename</span> _Container<span style="color:#ff79c6">::</span>value_type<span style="color:#ff79c6">&amp;</span> __value) { 
</span></span><span style="display:flex;"><span>    iter <span style="color:#ff79c6">=</span> container<span style="color:#ff79c6">-&gt;</span>insert(iter, __value);
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">++</span>iter;
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  insert_iterator<span style="color:#ff79c6">&lt;</span>_Container<span style="color:#ff79c6">&gt;&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">*</span>() { <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>; }
</span></span><span style="display:flex;"><span>  insert_iterator<span style="color:#ff79c6">&lt;</span>_Container<span style="color:#ff79c6">&gt;&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">++</span>() { <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>; }
</span></span><span style="display:flex;"><span>  insert_iterator<span style="color:#ff79c6">&lt;</span>_Container<span style="color:#ff79c6">&gt;&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">++</span>(<span style="color:#8be9fd">int</span>) { <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">*</span><span style="color:#ff79c6">this</span>; }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>执行<code>operator=</code>操作时，会操作在构造<code>insert_iterator</code> 传入的参数：容器以及容器的迭代器：</p>
<ul>
<li>调用容器的成员方法<code>insert</code> 在迭代器处插入数据</li>
<li>迭代器自增</li>
</ul>
<p>向这样的 insert 迭代器还有<code>front_inserter_iterator</code> 以及 <code>back_inserter_iterator</code>，这里就不做研究，有兴趣可以自查源码。</p>
<p>以上代码来自SGI STL，标准库的实现和SGI STL 的实现的大同小异。</p>

  </div>


  
<div>
  <ul class="tags">
  <li>
    <a href="https://www.zhangzewen.net/tags/c&#43;&#43;/" class="tag-link">C&#43;&#43;</a>
  </li>
  </ul>
</div>



  <div class="share-buttons">
    
  
<script src="https://utteranc.es/client.js"
        repo="zhangzewen/zhangzewen.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</div>


  
</div>
  </main>

  <footer>
  <div>
    <p>
      &copy; Zhang Zewen 2025

      &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

      
    </p>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
    integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0=" crossorigin="anonymous"></script>


  <script src="/js/jquery.min.js"></script>
  <script src="/js/soho.js"></script>

  

  
  
  
</body>

</html>
